<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Редизайн: 2000-е → Космический модерн</title>

  <!-- Общие стили проекта (единый стиль кнопок/типографики) -->
  <link rel="stylesheet" href="../assets/css/styles.css"/>

  <style>
    html{ scroll-behavior:smooth }

    /* =========================
       Тема + переменная прогресса
       ========================= */
    .theme{
      --t: 0; /* 0 — винтаж; 1 — модерн */

      /* Базовые палитры */
      --old-bg:#e0ecff;      --new-bg:#0e1024;
      --old-panel:#f4f7ff;   --new-panel:#0b0f22;
      --old-text:#0a2458;    --new-text:#e9faff;
      --old-accent:#1c7dff;  --new-accent:#00ffc8;

      /* Fallback — если нет color-mix: сразу современная тема */
      --bg:var(--new-bg);
      --panel:var(--new-panel);
      --text:var(--new-text);
      --accent:var(--new-accent);

      /* Геометрия/тени */
      --radius: calc(4px + (18px - 4px) * var(--t));
      --shadow: 0 calc(2px + 6px*var(--t)) calc(10px + 18px*var(--t)) rgba(0,0,0, calc(.12 + .25*var(--t)));

      background:var(--bg);
      color:var(--text);
      min-height:100dvh;
    }
    /* Включаем плавные смеси цветов только если браузер умеет */
    @supports (color: color-mix(in oklab, #000 50%, #fff)) {
      .theme{
        --bg:    color-mix(in oklab, var(--old-bg) calc(100% - var(--t)*100%), var(--new-bg) calc(var(--t)*100%));
        --panel: color-mix(in oklab, var(--old-panel) calc(100% - var(--t)*100%), var(--new-panel) calc(var(--t)*100%));
        --text:  color-mix(in oklab, var(--old-text) calc(100% - var(--t)*100%), var(--new-text) calc(var(--t)*100%));
        --accent:color-mix(in oklab, var(--old-accent) calc(100% - var(--t)*100%), var(--new-accent) calc(var(--t)*100%));
      }
    }

    .wrap{ max-width:1100px; margin:0 auto; padding:0 18px }
    section{ padding:44px 18px }
    @media (min-width:960px){ section{ padding:64px 18px } }

    /* Reveal-появление */
    .reveal{ opacity:0; transform:translateY(16px); transition:.6s ease }
    .reveal.visible{ opacity:1; transform:none }

    /* =========================
       1) ВЕРХ: ВИНТАЖНЫЙ ДЕСКТОП (FULL BLEED)
       ========================= */
    .desktop{
      width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
      position:relative; overflow:hidden; padding:0; isolation:isolate;
      background:
        radial-gradient(120% 80% at 50% -10%, rgba(255,255,255,.6), transparent 60%),
        linear-gradient(180deg, color-mix(in oklab, #ffffff calc(60% - var(--t)*60%), #15193a calc(var(--t)*100%)) 0%, var(--bg) 100%);
    }
    .desktop::after{ /* CRT-скан + виньетка → исчезают */
      content:""; position:absolute; inset:0; pointer-events:none;
      background:
        repeating-linear-gradient(0deg, rgba(0,0,0, .06*(1 - var(--t))) 0 2px, transparent 2px 4px),
        radial-gradient(200% 120% at 50% -20%, rgba(0,0,0,.25), transparent 50%);
      mix-blend-mode:soft-light; opacity: calc(.75 * (1 - var(--t)));
    }
    .desk-inner{
      display:grid; gap:18px; align-items:center;
      grid-template-columns:1.1fr 1fr;
      padding: clamp(28px, 7vw, 84px) 18px clamp(24px, 10vw, 140px);
    }
    @media (max-width:959.98px){ .desk-inner{ grid-template-columns:1fr } }

    .win{
      background: color-mix(in oklab, #f6f9ff calc(100% - var(--t)*100%), var(--panel) calc(var(--t)*100%));
      border-radius: var(--radius);
      border:1px solid color-mix(in oklab, #ffffff 45%, rgba(255,255,255,.08) calc(var(--t)*100%));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .win-title{
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      background: linear-gradient(#2e78df, #1b4e9f);
      color:#fff; font-weight:700; letter-spacing:.2px; opacity: calc(1 - var(--t));
    }
    .win-title .dots{ margin-left:auto; display:flex; gap:6px }
    .win-title .d{ width:14px; height:14px; border-radius:2px; background:linear-gradient(#fff,#ddd); box-shadow: inset 0 0 0 1px rgba(0,0,0,.25) }

    .mod-bar{
      opacity: var(--t); transform: translateY(calc(8px*(1 - var(--t))));
      transition: opacity .2s linear, transform .2s linear;
      display:flex; align-items:center; gap:12px; padding:12px;
    }
    .mod-bar .dot{ width:10px; height:10px; border-radius:50%; background:#00ffc8; box-shadow:0 0 10px rgba(0,255,200,.6) }

    .win-body{ padding:14px 12px 18px }
    .win-body h1{
      margin:0 0 10px; font-size:clamp(22px,4.8vw,40px); line-height:1.18;
      background:linear-gradient(90deg,#000,#444 40%,#aaa 70%,#000);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      filter:saturate(calc(.4 + .6*var(--t)));
    }
    .win-body p{ margin:0; color: color-mix(in oklab, #0a2458 calc(100% - var(--t)*100%), #b7c0cb calc(var(--t)*100%)) }

    /* Иконки: винтаж → модерн (кроссфейд + лёгкая орбита) */
    .icons{
      position:relative; height:300px;
      border-radius: calc(10px + 12px*var(--t));
      background:
        linear-gradient(145deg,
          color-mix(in oklab, #ffffff calc(85% - var(--t)*85%), #1a203f calc(var(--t)*100%)),
          color-mix(in oklab, #e8f0ff calc(100% - var(--t)*100%), #0b0f22 calc(var(--t)*100%)));
      border:1px solid color-mix(in oklab, #ffffff 45%, rgba(255,255,255,.1) calc(var(--t)*100%));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .icon, .icon-modern{
      position:absolute; width:56px; height:56px; display:grid; place-items:center;
      border-radius:12px; font-weight:900; transition: transform .8s ease;
      filter: drop-shadow(0 6px 16px rgba(0,0,0,.25));
    }
    .icon{ background:#fff; color:#0a2458 }
    .icon.v1{ left:8%;  top:12%; transform: rotate(-6deg) }
    .icon.v2{ left:30%; top:62%; transform: rotate(4deg) }
    .icon.v3{ left:64%; top:26%; transform: rotate(-3deg) }
    .icon.v4{ left:78%; top:68%; transform: rotate(3deg) }

    .icon-modern{
      border-radius:14px;
      background: radial-gradient(120% 120% at 50% 10%, rgba(255,255,255,.35), transparent 60%),
                  linear-gradient(145deg,#2bd9ff,#7f5aff 35%,#00ffc8 70%,#ff6aa2);
      color:#0b0f22; box-shadow:
        0 0 0 1px rgba(255,255,255,.18) inset,
        0 10px 28px rgba(127,77,255,.35),
        0 2px 0 rgba(255,255,255,.15) inset;
      opacity: calc(.05 + .95*var(--t));
      transform: translateY(calc(12px*(1 - var(--t))));
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.35));
      animation: orbit 6s ease-in-out infinite;
    }
    .icon-modern.m1{ left:10%; top:16% } .icon-modern.m2{ left:34%; top:64% }
    .icon-modern.m3{ left:66%; top:30% } .icon-modern.m4{ left:80%; top:72% }
    @keyframes orbit{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-7px) } }

    /* Космическая «аура» */
    .aurora{
      position:absolute; inset:-30% -20% auto -20%; height:60vh; pointer-events:none; z-index:0;
      background: conic-gradient(from 0deg,#27d7ff,#7c4dff,#00ffc8,#27d7ff);
      filter: blur(50px) saturate(1.2); opacity: calc(.25*var(--t));
      animation: spin 18s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }

    /* Хронокнопка: прямоугольная 2000-х → неоновая капсула */
    .chrono{
      --t: var(--t);
      position:relative; display:inline-block; text-decoration:none; cursor:pointer;
      padding:10px 14px; border-radius:calc(4px + (999px - 4px) * var(--t));
      border:1px solid color-mix(in oklab, #1c7dff calc(100% - var(--t)*100%), rgba(255,255,255,.18) calc(var(--t)*100%));
      color: color-mix(in oklab, #0a2458 calc(100% - var(--t)*100%), #0b0f22 calc(var(--t)*100%));
      background:
        radial-gradient(60% 200% at 50% 0%, rgba(255,255,255,.35), transparent 60%) calc(var(--t)*1),
        linear-gradient(145deg,
          color-mix(in oklab, #e6f0ff calc(100% - var(--t)*100%), #2bd9ff calc(var(--t)*100%)),
          color-mix(in oklab, #d3e5ff calc(100% - var(--t)*100%), #7f5aff calc(var(--t)*100%)) 35%,
          color-mix(in oklab, #c4dbff calc(100% - var(--t)*100%), #00ffc8 calc(var(--t)*100%)) 70%,
          color-mix(in oklab, #b7d3ff calc(100% - var(--t)*100%), #ff6aa2 calc(var(--t)*100%)));
      box-shadow:
        0 0 0 1px rgba(255,255,255,.12) inset,
        0 calc(10px*var(--t)) calc(28px*var(--t)) rgba(127,77,255,.35),
        0 calc(2px*var(--t)) 0 rgba(255,255,255,.15) inset;
      font-weight:700; letter-spacing:.2px;
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
      will-change: filter, transform;
    }
    .chrono:hover{ transform:translateY(-1px) }
    .chrono:active{ transform:translateY(0) scale(.98) }

    /* =========================
       2) ПАНЕЛЬ «ДО/ПОСЛЕ» + длинный текст
       ========================= */
    .panel{
      background: var(--panel);
      border:1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
    }
    .muted{ color:#b7c0cb }

    .compare{
      display:grid; gap:16px; grid-template-columns:1fr 1fr;
    }
    @media (max-width:959.98px){ .compare{ grid-template-columns:1fr } }
    .fake{
      height:200px; border-radius:12px; overflow:hidden; position:relative;
      background: linear-gradient(180deg, #f4f7ff, #dfe9ff);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
      opacity: calc(1 - var(--t));
    }
    .fake::after{
      content:"2000-е макет"; position:absolute; right:10px; bottom:8px; font-size:12px; color:#244; opacity:.7;
    }
    .fake-modern{
      height:200px; border-radius:12px; overflow:hidden; position:relative;
      background: linear-gradient(145deg, #10142a, #0b0f22);
      border:1px solid rgba(255,255,255,.08);
      box-shadow:none;
      opacity: var(--t);
      transform: translateY(calc(8px*(1 - var(--t))));
      transition: opacity .2s linear, transform .2s linear;
    }
    .fake-modern::after{ content:"современный макет"; position:absolute; right:10px; bottom:8px; font-size:12px; color:#9ad; opacity:.8 }

    /* =========================
       3) ГАЛЕРЕЯ МОРФИНГОВ (иконки/кнопки)
       ========================= */
    .gallery{ display:grid; gap:16px }
    @media (min-width:960px){ .gallery{ grid-template-columns:repeat(3,1fr) } }
    @media (min-width:600px) and (max-width:959.98px){ .gallery{ grid-template-columns:repeat(2,1fr) } }

    /* =========================
       4) ФИНАЛЬНАЯ СЦЕНА: сетка + частички
       ========================= */
    .stage{
      position:relative; overflow:hidden; border-radius:18px;
      background: radial-gradient(120% 80% at 50% -20%, rgba(0,255,200,.08), transparent 60%),
                  linear-gradient(180deg,#10142a,#0b0f22);
      box-shadow: var(--shadow);
      border:1px solid rgba(255,255,255,.08);
      min-height: 360px;
    }
    .stage canvas{ position:absolute; inset:0; pointer-events:none }
    .gridlines{
      position:absolute; inset:0; background:
        linear-gradient(transparent 95%, rgba(255,255,255,.06) 96%),
        linear-gradient(90deg, transparent 95%, rgba(255,255,255,.06) 96%);
      background-size: 32px 32px;
      opacity: calc(.25 + .35*var(--t));
      filter: blur(calc(0px + 1px*var(--t)));
    }
    .stage .content{ position:relative; z-index:1; padding:18px; display:grid; gap:10px }
    .pulse-dot{ width:10px; height:10px; border-radius:50%; background:#00ffc8; box-shadow:0 0 10px rgba(0,255,200,.8); animation:pulse 2.2s ease-in-out infinite }
    @keyframes pulse{ 0%{opacity:.4; transform:scale(1)} 50%{opacity:1; transform:scale(1.2)} 100%{opacity:.4; transform:scale(1)} }

    /* Контакты (full-bleed, как на остальных страницах) */
    #contacts.full-bleed{
      width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw);
      padding:24px 0; background:#1e1f24; box-shadow:0 -1px 0 rgba(255,255,255,.06) inset;
    }
    #contacts.full-bleed .wrap{ max-width:1100px; margin:0 auto; padding:0 18px }
    #contacts .contact-buttons{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center }
    #contacts .contact-buttons .cta-button{ width:auto; min-width:0; padding:12px 18px; margin-top:0; border-radius:999px }
    #contacts{ scroll-margin-top:24px }

    /* Performance-режимы */
    @media (prefers-reduced-motion:reduce){
      .icon-modern{ animation:none }
      .aurora{ animation:none }
      .reveal{ transition:none }
      .desktop::after{ opacity:.2 }
    }
    @media (hover:none) and (pointer:coarse){
      .aurora{ animation:none; opacity:.18 }
      .icon-modern{ animation:none }
      .desktop::after{ opacity:.4 }
    }
  </style>
</head>
<body>

  <main class="theme">

    <!-- 1) ВЕРХ: ВИНТАЖНЫЙ ДЕСКТОП -->
    <section class="desktop">
      <div class="aurora"></div>
      <div class="desk-inner wrap">
        <div class="win reveal">
          <div class="win-title">
            <span>Сайт — окно</span>
            <div class="dots"><span class="d"></span><span class="d"></span><span class="d"></span></div>
          </div>
          <div class="mod-bar">
            <span class="dot"></span><strong>Современный режим</strong>
            <span class="muted">гладкий рендер, неон, микро-анимации</span>
          </div>
          <div class="win-body">
            <h1>Олдскул → Космический модерн</h1>
            <p>Заходишь — винтаж. Скроллишь — интерфейс живёт: иконки оживают, фон мерцает,
              панели меняют форму/текстуры. Внизу — контакты как на всех страницах.</p>
            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
              <a href="../index.html" class="chrono">Вернуться на главную</a>
              <a href="#contacts" class="chrono">Связаться</a>
            </div>
          </div>
        </div>

        <!-- Иконки 2000-х → современные -->
        <div class="icons reveal" aria-hidden="true">
          <div class="icon v1">💾</div>
          <div class="icon v2">🗂️</div>
          <div class="icon v3">🖱️</div>
          <div class="icon v4">💻</div>

          <div class="icon-modern m1">☁️</div>
          <div class="icon-modern m2">🚀</div>
          <div class="icon-modern m3">✨</div>
          <div class="icon-modern m4">🔮</div>
        </div>
      </div>
    </section>

    <!-- 2) ПАНЕЛЬ «ДО/ПОСЛЕ» (разгоняем скролл) -->
    <section class="wrap reveal">
      <div class="panel">
        <h2 style="margin:0 0 8px">Переосмысление, не перекраска</h2>
        <p class="muted" style="margin:0 0 12px">Структура, язык, ритм появления — всё ведёт к действию. Морфинг показывает путь: 2000-е → модерн.</p>
        <div class="compare" style="margin-top:10px">
          <div>
            <div class="fake"></div>
            <p class="muted" style="margin:10px 0 0">До: шум, лишние рамки, слабые CTA.</p>
          </div>
          <div>
            <div class="fake-modern"></div>
            <p class="muted" style="margin:10px 0 0">После: ясность, лёгкость, ритм и акцент.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 3) ГАЛЕРЕЯ МОРФИНГОВ (иконки/кнопки) -->
    <section class="wrap reveal">
      <div class="gallery">
        <div class="panel">
          <h3 style="margin:0 0 6px">Иконки</h3>
          <p class="muted" style="margin:0 0 10px">Кроссфейд в «глоу», лёгкая орбита.</p>
          <div class="icons" style="height:220px">
            <div class="icon v1" style="left:14%;top:20%">📁</div>
            <div class="icon v2" style="left:34%;top:58%">📎</div>
            <div class="icon v3" style="left:62%;top:24%">🖨️</div>
            <div class="icon-modern m1" style="left:16%;top:24%">💡</div>
            <div class="icon-modern m2" style="left:36%;top:62%">⚡</div>
            <div class="icon-modern m3" style="left:64%;top:28%">🌈</div>
          </div>
        </div>
        <div class="panel">
          <h3 style="margin:0 0 6px">Кнопки</h3>
          <p class="muted" style="margin:0 0 10px">Прямоугольные → капсулы с неоном.</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <a href="#contacts" class="chrono">Написать</a>
            <a href="../index.html" class="chrono">На главную</a>
          </div>
        </div>
        <div class="panel">
          <h3 style="margin:0 0 6px">Панели/карточки</h3>
          <p class="muted" style="margin:0 0 10px">Грани, тени и фон плавно меняются.</p>
          <div class="fake" style="height:120px"></div>
          <div class="fake-modern" style="height:120px; margin-top:10px"></div>
        </div>
      </div>
    </section>

    <!-- 4) ФИНАЛЬНАЯ КОСМО-СЦЕНА -->
    <section class="wrap reveal">
      <div class="stage">
        <canvas id="starfield"></canvas>
        <div class="gridlines" aria-hidden="true"></div>
        <div class="content">
          <div style="display:flex; align-items:center; gap:10px">
            <span class="pulse-dot" aria-hidden="true"></span>
            <strong>Современный ритм</strong>
            <span class="muted">микро-движения и плавный свет без «ярмарки»</span>
          </div>
          <p class="muted" style="margin:0">
            Здесь — финиш анимаций: частицы, сетка, неоновая аура. Идея в том, чтобы визуально дать «дыхание» интерфейсу, не мешая смыслу.
          </p>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap">
            <a href="#contacts" class="chrono">Связаться</a>
            <a href="../index.html" class="chrono">Вернуться на главную</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Контакты (full-bleed, как на остальных страницах) -->
    <section id="contacts" class="full-bleed">
      <div class="wrap" style="text-align:center">
        <h2>Связаться со мной</h2>
        <p>Напиши в мессенджер или на почту — отвечаю быстро!</p>
        <div class="contact-buttons">
          <a class="cta-button telegram" href="https://t.me/yourusername" target="_blank" rel="noopener">Telegram</a>
          <a class="cta-button whatsapp" href="https://wa.me/71234567890" target="_blank" rel="noopener">WhatsApp</a>
          <a class="cta-button alt" href="mailto:example@mail.ru?subject=Редизайн%20сайта">Email</a>
        </div>
      </div>
    </section>

    <footer>
      <p>&copy; 2025 Ваше имя. Все права защищены. <a href="#">Политика конфиденциальности</a></p>
    </footer>
  </main>

  <!-- Скролл → переменная --t (длинная шкала) -->
  <script>
    (function(){
      const root = document.querySelector('.theme');
      if(!root) return;
      const RANGE = 1800; // длина «превращения»
      const setT = () => {
        const y = window.scrollY || document.documentElement.scrollTop || 0;
        const t = Math.max(0, Math.min(1, y / RANGE));
        root.style.setProperty('--t', t.toFixed(3));
      };
      setT();
      window.addEventListener('scroll', setT, {passive:true});
    })();
  </script>

  <!-- Пауза ауры при скрытой вкладке -->
  <script>
    (function(){
      const aurora = document.querySelector('.aurora');
      if(!aurora) return;
      const onVis = () => { aurora.style.animationPlayState = document.hidden ? 'paused' : 'running'; };
      document.addEventListener('visibilitychange', onVis);
      onVis();
    })();
  </script>

  <!-- Reveal по IntersectionObserver -->
  <script>
    (function(){
      const io = new IntersectionObserver((ents)=>{
        ents.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); }});
      },{ rootMargin:"0px 0px -10% 0px", threshold:.12 });
      document.querySelectorAll('.reveal').forEach((el,i)=>{ el.style.transitionDelay=(i*50)+'ms'; io.observe(el); });
    })();
  </script>

  <!-- Частицы: космо-звёзды финальной сцены (лёгкая, без ResizeObserver) -->
  <script>
    (function(){
      const c = document.getElementById('starfield');
      if(!c) return;
      const ctx = c.getContext('2d');
      let w, h, stars=[];
      const DPR = Math.min(2, window.devicePixelRatio || 1);

      function resize(){
        w = c.clientWidth; h = c.clientHeight;
        c.width = Math.floor(w * DPR); c.height = Math.floor(h * DPR);
        ctx.setTransform(DPR,0,0,DPR,0,0);
        makeStars();
      }
      function makeStars(){
        let COUNT = Math.floor((w * h) / 8000);
        const MAX = 140;
        if (COUNT > MAX) COUNT = MAX;
        const isMobile = matchMedia('(hover:none) and (pointer:coarse)').matches;
        if (isMobile) COUNT = Math.min(COUNT, 80);
        stars = Array.from({length: COUNT}, () => ({
          x: Math.random() * w,
          y: Math.random() * h,
          r: Math.random() * 1.5 + 0.4,
          vx: (Math.random() - .5) * 0.035,
          vy: (Math.random() - .5) * 0.035,
          a: Math.random() * 1
        }));
      }
      function draw(){
        ctx.clearRect(0,0,w,h);
        for(const s of stars){
          s.x += s.vx; s.y += s.vy; s.a += 0.018;
          if(s.x<0) s.x=w; if(s.x>w) s.x=0;
          if(s.y<0) s.y=h; if(s.y>h) s.y=0;
          const alpha = .26 + .26 * Math.sin(s.a);
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
          ctx.fillStyle = `rgba(255,255,255,${alpha})`;
          ctx.fill();
        }
        requestAnimationFrame(draw);
      }
      resize(); draw();
      window.addEventListener('resize', resize, {passive:true});
    })();
  </script>
</body>
</html>
